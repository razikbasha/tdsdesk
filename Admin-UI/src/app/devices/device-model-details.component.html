<!-- begin breadcrumb -->
<ol class="breadcrumb pull-right" *ngIf="isReadOnly" >
    <!--
    <li><a href="javascript:;">Home</a></li>
    <li><a href="javascript:;">Tenants</a></li>
    <li class="active">New Tenant</li>
    -->
    <li><button (click)="closeDeviceModel()" type="button" class="btn btn-default m-r-5 m-b-5">Close</button></li>
    <li><button (click)="editDeviceModel()" type="button" class="btn btn-danger m-r-5 m-b-5">Edit</button></li>
    <li>&nbsp;</li>
    <li>&nbsp;</li>
</ol>
<ol class="breadcrumb pull-right" *ngIf="!isReadOnly" >
    <li><button (click)="cancelEditDeviceModel()" type="button" class="btn btn-default m-r-5 m-b-5 ">Cancel</button></li>
    <li><button (click)="saveDeviceModel()" type="button" class="btn btn-danger m-r-5 m-b-5">Save</button></li>
    <li>&nbsp;</li>
    <li>&nbsp;</li>
</ol>
<!-- end breadcrumb -->

<!-- begin page-header -->
<h1 class="page-header">{{ formHeader }}</h1>
<!-- end page-header -->

<form class="form-horizontal" [formGroup]="deviceModelDetailsForm">


    <!-- begin row -->
    <div class="row">

        <!-- begin col-8 Basic Information -->
        <div class="float-divs-diff-heights col-md-8">
            <!-- begin panel -->
            <div class="panel panel-inverse" data-sortable-id="form-stuff-1">
                <div class="panel-heading">
                    <div class="panel-heading-btn">
                        <a href="javascript:;" class="btn btn-xs btn-icon btn-circle btn-default" data-click="panel-expand"><i class="fa fa-expand"></i></a>
                        <a href="javascript:;" class="btn btn-xs btn-icon btn-circle btn-success" data-click="panel-reload"><i class="fa fa-repeat"></i></a>
                        <a href="javascript:;" class="btn btn-xs btn-icon btn-circle btn-warning" data-click="panel-collapse"><i class="fa fa-minus"></i></a>
                    </div>
                    <h4 class="panel-title">Basic Information</h4>
                </div>

                <div class="panel-body">
                    
                    <!--<label class="col-md-3 control-label">Device Type Template</label>
                    <div class="col-md-6">
                        <select class="form-control" formControlName="deviceTypeTemplate" >
                            <option *ngFor="let deviceTypeTemplate of deviceTypeTemplates" [value]="deviceTypeTemplate" >{{ deviceTypeTemplate }}</option>
                        </select>
                    </div>
                    <br><br>
                    <hr/>-->
                    <div class="form-group">
                        <label class="col-md-3 control-label">Device Model ID</label>
                        <div class="col-md-9">
                            <input type="text" class="form-control" placeholder="Device Model ID" formControlName="deviceModelId" />
                        </div>
                        
                    </div>
                    <div class="form-group">
                        <label class="col-md-3 control-label">Tenant Name</label>
                        <div class="col-md-9">
                            <select class="form-control" formControlName="deviceTenantId" >
                                <option *ngFor="let tenant of tenants" [value]="tenant.id">{{ tenant.friendly_name }}</option>
                            </select>
                        </div>
                    </div>

                    <div class="form-group">
                        <label class="col-md-3 control-label">Device Type</label>
                        <div class="col-md-9">
                            <select class="form-control" formControlName="deviceType" >
                                <option *ngFor="let deviceType of devicesTypes" [value]="deviceType.id">{{ deviceType.friendly_name }}</option>
                            </select>
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-md-3 control-label">Number of Devices</label>
                        <div class="col-md-9">
                            <input type="text" class="form-control" placeholder="Number" formControlName="numberOfDevices" />
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-md-3 control-label">Use Case</label>
                        <div class="col-md-9">
                            <select class="form-control" formControlName="deviceUsecase" >
                                <option *ngFor="let usecase of filteredUsecases" [value]="usecase.id">{{ usecase.name }}</option>
                            </select>
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-md-3 control-label">No. of Sensors per Device</label>
                        <div class="col-md-9">
                            <input type="text" class="form-control" placeholder="Number of Sensors per Device" formControlName="numberOfSensorsPerDevice" />
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-md-3 control-label">Device Details</label>
                        <div class="col-md-9">
                            <textarea class="form-control" placeholder="Description" rows="5" formControlName="deviceDetails" ></textarea>
                        </div>
                    </div>
                </div>
            </div>
            <!-- end panel -->
           
        </div>
        <!-- end col-8 -->

        <!-- begin col-4 Device Data Details -->
        <div class="float-divs-diff-heights col-md-4">
            <!-- begin panel -->
            <div class="panel panel-inverse" data-sortable-id="form-stuff-1">
                <div class="panel-heading">
                    <div class="panel-heading-btn">
                        <a href="javascript:;" class="btn btn-xs btn-icon btn-circle btn-default" data-click="panel-expand"><i class="fa fa-expand"></i></a>
                        <a href="javascript:;" class="btn btn-xs btn-icon btn-circle btn-success" data-click="panel-reload"><i class="fa fa-repeat"></i></a>
                        <a href="javascript:;" class="btn btn-xs btn-icon btn-circle btn-warning" data-click="panel-collapse"><i class="fa fa-minus"></i></a>
                    </div>
                    <h4 class="panel-title">Device Data Details</h4>
                </div>
                <div class="panel-body">
                    <label class="control-label">Protocol</label>
                    <select class="form-control" formControlName="deviceProtocol" >
                        <option *ngFor="let deviceProtocol of protocols" [value]="deviceProtocol" >{{ deviceProtocol }}</option>
                    </select>
                    <div>
                        <label class="control-label">User Data Import&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</label>
                        <input type="checkbox" formControlName="isUserDataImport" /> Yes
                    </div>
                    <div>
                        <label class="control-label">Device Data Import&nbsp; &nbsp; &nbsp; &nbsp;</label>
                        <input type="checkbox" formControlName="isDeviceDataImport" /> Yes
                    </div>
                    <div>&nbsp;</div>
                    <label class="control-label">Device Region</label>
                    <select class="form-control" formControlName="deviceRegion" >
                        <option *ngFor="let deviceRegion of regions" [value]="deviceRegion" >{{ deviceRegion }}</option>
                    </select>
                    <label class="control-label">Raw Data Format</label>
                    <select class="form-control" formControlName="rawDataFormat" >
                        <option *ngFor="let rawDataFormat of rawDataFormats" [value]="rawDataFormat" >{{ rawDataFormat }}</option>
                    </select>
                    <label class="control-label">Data Frequency per HOUR</label>
                    <input type="text" formControlName="deviceDataFrequency">

                    <label class="control-label">Data Package Size in Byte</label>
                    <input type="text" formControlName="deviceDataPackageSize">

                    <label class="control-label">Data Interface</label>
                    <select class="form-control" formControlName="dataInterface">
                        <option *ngFor="let dataInterface of dataInterfaces" [value]="dataInterface" >{{ dataInterface }}</option>
                    </select>
                    
                    <label class="control-label">Interface Description</label>
                    <textarea rows="10" class="form-control" formControlName="interfaceDescription" placeholder="Description of the different interfaces of the mobile Application Workflow on the Mobile Application. Please let us know the github access of the Application.  Please share the access URL and Credential of the iOS and Android Application." ></textarea>
                    
                    <label class="control-label">Max Allowed Tokens Per User</label>
                    <input type="text" class="form-control" placeholder="Number" formControlName="maxAllowedTokensPerUser" />
                    <div>&nbsp;</div>
                    <div>
                        <label class="control-label">Notification Types</label>
                        <div class="table-responsive">
                            <table >
                                <tr>
                                    <td width="30%;"><input type="checkbox" formControlName="notificationTypeEmail" />&nbsp;&nbsp;Email</td>
                                    <td width="50%;" align="left">
                                        <input type="radio" name="notificationTypeEmail" value="asynch" />&nbsp;Asynch&nbsp; &nbsp; &nbsp; &nbsp;
                                        <input type="radio" name="notificationTypeEmail" value="realtime" checked/>&nbsp;Real-time
                                    </td>
                                </tr>
                                <tr>
                                    <td width="30%;"><input type="checkbox" formControlName="notificationTypeSMS" />&nbsp;&nbsp;SMS</td>
                                    <td width="50%;" align="left">
                                        <input type="radio" name="notificationTypeSMS" value="asynch" checked/>&nbsp;Asynch&nbsp; &nbsp; &nbsp; &nbsp;
                                        <input type="radio" name="notificationTypeSMS" value="realtime" />&nbsp;Real-time
                                    </td>
                                </tr>
                                <tr>
                                    <td width="30%;"><input type="checkbox" formControlName="notificationTypeMobile" />&nbsp;&nbsp;Mobile</td>
                                    <td width="50%;" align="left">
                                        <input type="radio" name="notificationTypeMobile" value="asynch" />&nbsp;Asynch&nbsp; &nbsp; &nbsp; &nbsp;
                                        <input type="radio" name="notificationTypeMobile" value="realtime" checked/>&nbsp;Real-time
                                    </td>
                                </tr>
                                <tr>
                                    <td width="30%;"><input type="checkbox" formControlName="notificationTypeOther" />&nbsp;&nbsp;Other</td>
                                    <td width="50%;" align="left">
                                        <input type="radio" name="notificationTypeOther" value="asynch" checked/>&nbsp;Asynch&nbsp; &nbsp; &nbsp; &nbsp;
                                        <input type="radio" name="notificationTypeOther" value="realtime" />&nbsp;Real-time
                                    </td>
                                </tr>
                            </table>
                        </div>
                    </div>
                    <div>&nbsp;</div>
                    <div>
                        <label class="control-label">Scheduled Actions Needed?&nbsp;&nbsp;</label>
                        <input type="checkbox" formControlName="scheduledActionsNeeded" /> Yes
                    </div>
                    <div>&nbsp;</div>
                    <div>
                        <label class="control-label">Scheduling.&nbsp;</label><span>Will this be managed by either the mobile application only or will be done by backend platform server also?&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span>
                        <div>&nbsp;</div>
                        <input type="radio" formControlName="schedulingWillBeManagedBy" value="mobile" />&nbsp;Mobile&nbsp;
                        <input type="radio" formControlName="schedulingWillBeManagedBy" value="cloud" />&nbsp;Cloud
                    </div>
                    <div>&nbsp;</div>
                    <div>
                        <label class="control-label">Data/Views Showing.&nbsp;</label><span>Any data/views that is being shown on the Mobile Apps after receiving it from the Device?&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span>
                        <input type="checkbox" formControlName="isDataViewsShowing" /> Yes
                    </div>
                    <div>&nbsp;</div>

                </div>
            </div>
            <!-- end panel -->
        </div>
        <!-- end col-4 -->

        

        <!-- begin col-4 Mobile App Details -->
        <div class="float-divs-diff-heights col-md-4 hide">
            <!-- begin panel -->
            <div class="panel panel-inverse" data-sortable-id="form-stuff-1">
                <div class="panel-heading">
                    <div class="panel-heading-btn">
                        <a href="javascript:;" class="btn btn-xs btn-icon btn-circle btn-default" data-click="panel-expand"><i class="fa fa-expand"></i></a>
                        <a href="javascript:;" class="btn btn-xs btn-icon btn-circle btn-success" data-click="panel-reload"><i class="fa fa-repeat"></i></a>
                        <a href="javascript:;" class="btn btn-xs btn-icon btn-circle btn-warning" data-click="panel-collapse"><i class="fa fa-minus"></i></a>
                    </div>
                    <h4 class="panel-title">Mobile App Details</h4>
                </div>
                <div class="panel-body">
                    <label class="control-label">Mobile App Login/Auth Support Requirements</label>
                    <div class="form-group">
                        <div class="col-md-9">
                            <div class="checkbox">
                                <label>
                                    <input type="checkbox" value="mobileAppLoginOAuthRequirementGoogle" />
                                    Google
                                </label>
                            </div>
                            <div class="checkbox">
                                <label>
                                    <input type="checkbox" value="mobileAppLoginOAuthRequirementFacebook" />
                                    Facebook
                                </label>
                            </div>
                            <div class="checkbox">
                                <label>
                                    <input type="checkbox" value="mobileAppLoginOAuthRequirementOTP" />
                                    OTP
                                </label>
                            </div>
                            <div class="checkbox">
                                <label>
                                    <input type="checkbox" value="mobileAppLoginOAuthRequirementMultiFactor" />
                                    Multi-Factor
                                </label>
                            </div>
                        </div>
                    </div>
                    <label class="control-label">Mobile App Features</label>
                    <textarea class="form-control" placeholder="What different features/functionality are implemented in the Mobile Apps?" rows="10" formControlName="inviteNoteMobileAppFeatures" ></textarea>
                    <div>&nbsp;</div>
                    <label class="control-label">Mobile App Permission Manager</label>
                    <textarea class="form-control" placeholder="When a new user is registered, how user and device permission is being managed on the mobile application?" rows="10" formControlName="inviteNoteMobileAppPermissionMgr" ></textarea>
                    <div>&nbsp;</div>
                    <label class="control-label">User Device Permissions</label>
                    <textarea class="form-control" placeholder="When a new user is registered, how user and device permission is being managed on the mobile application??" rows="10" formControlName="inviteNoteUserDevicePermissions" ></textarea>
                    <div>&nbsp;</div>
                </div>
            </div>
            <!-- end panel -->
        </div>
        <!-- end col-4 -->

        <!-- begin col-8 General Information -->
        <div class="float-divs-diff-heights col-md-8">
            <!-- begin panel -->
            <div class="panel panel-inverse" data-sortable-id="form-stuff-1">
                <div class="panel-heading">
                    <div class="panel-heading-btn">
                        <a href="javascript:;" class="btn btn-xs btn-icon btn-circle btn-default" data-click="panel-expand"><i class="fa fa-expand"></i></a>
                        <a href="javascript:;" class="btn btn-xs btn-icon btn-circle btn-success" data-click="panel-reload"><i class="fa fa-repeat"></i></a>
                        <a href="javascript:;" class="btn btn-xs btn-icon btn-circle btn-warning" data-click="panel-collapse"><i class="fa fa-minus"></i></a>
                    </div>
                    <h4 class="panel-title">General Information</h4>
                </div>
                <div class="panel-body">
                    <div class="form-group">
                        <label class="col-md-3 control-label">Device Image</label>
                        <div class="col-md-9">
                            <input type="text"  class="form-control" formControlName="deviceImagePath" hidden="hidden"/>
                            <div *ngIf="isReadOnly"><img *ngIf="urlDeviceImage" [src]="urlDeviceImage"></div>
                            <div *ngIf="!isReadOnly" [dropzone]="config" (error)="onUploadError($event)" (success)="onUploadSuccess($event, 'deviceImage')"></div>
                        
                         </div>
                    </div>
                    <div class="form-group">
                        <label class="col-md-3 control-label">Device Icon</label>
                        <div class="col-md-9">
                            <input type="text"  class="form-control" formControlName="deviceIconPath" hidden="hidden"/>
                            <div *ngIf="isReadOnly"><img *ngIf="urlDeviceIcon" [src]="urlDeviceIcon"></div>
                            <div *ngIf="!isReadOnly" [dropzone]="config" (error)="onUploadError($event)" (success)="onUploadSuccess($event, 'deviceIcon')"></div>
                        
                        </div>
                    </div>
                    <div class="form-group"  *ngIf="attachDocuments">
                        <label class="col-md-3 control-label">Device Documents</label>
                        <div class="col-md-9">
                            <textarea class="form-control" placeholder="Description" rows="15" formControlName="deviceDocuments" >Device Documents</textarea>
                            <label class="control-label">Attached Documents</label>
                            <div>&nbsp;</div>
                            <table>
                                 <tr *ngFor="let attachDocument of attachDocuments">
                                <tr>
                                    <td align="left"><i class="fa fa-file-pdf-o"></i></td>
                                    <td width="70%;" class="font-red"><a href="{{ attachDocument.path }} + {{ attachDocument.filename }}">{{ attachDocument.filename }}</a></td> 
                                    <td align="right">&nbsp;<i class="fa fa-trash-o"></i></td>
                                </tr>
                        
                            </table>
                            <div>&nbsp;</div>
                            
                        </div>

                    </div>
                        <div class="form-group"  *ngIf="!isReadOnly">
                            <label class="col-md-3 control-label">Register Device ID</label>
                            <div class="col-md-9">
                                <input type="text"  class="form-control" formControlName="deviceId"/>
                            </div>                    
                        </div>  
                        <div class="form-group"  *ngIf="!isReadOnly">
                                <label class="col-md-3 control-label">Name</label>
                                <div class="col-md-9">
                                        <input type="text" class="form-control" formControlName="deviceName"/>
                                </div>                    
                        </div>
                            <div class="form-group"  *ngIf="!isReadOnly">
                                    <label class="col-md-3 control-label">Friendly Name</label>
                                    <div class="col-md-9">
                                            <input type="text" class="form-control" formControlName="deviceFriendlyName"/>
                                    </div>                    
                            </div>
                            <div class="form-group"  *ngIf="!isReadOnly">
                                        <label class="col-md-3 control-label">Location</label>
                                        <div class="col-md-9">
                                                <input type="text" class="form-control" formControlName="deviceLocation"/>
                                        </div>                    
                            </div>
                               <div class="form-group"  *ngIf="!isReadOnly">
                                   <div class="col-md-3">&nbsp;</div>
                                   <div class="col-md-9">
                                   <button (click)="registerDevice()" type="button" class="btn btn-link m-b-5 f-s-11">Register Device</button>
                                </div>
                            </div> 
                </div>
            </div>
            <!-- end panel -->
            <!-- begin panel -->
            <div class="panel panel-inverse" data-sortable-id="ui-general-3" *ngIf="devices">
                    <div class="panel-heading">
                        <div class="panel-heading-btn">
                            <a href="javascript:;" class="btn btn-xs btn-icon btn-circle btn-default" data-click="panel-expand"><i class="fa fa-expand"></i></a>
                            <a href="javascript:;" class="btn btn-xs btn-icon btn-circle btn-success" data-click="panel-reload"><i class="fa fa-repeat"></i></a>
                            <a href="javascript:;" class="btn btn-xs btn-icon btn-circle btn-warning" data-click="panel-collapse"><i class="fa fa-minus"></i></a>
                        </div>
                        <h4 class="panel-title">Devices</h4>
                    </div>
                    <div class="panel-body" >
                        <table id="data-table-devices" class="table table-striped table-bordered">
                                <thead>
                                <tr>
                                    <th>Device</th>
                                    <th>Name</th>
                                    <th>Friendly Name</th>
                                    <th>Device Model</th>
                                    <th>Use Case</th>
                                    <th>Location</th>
                                    <th>Region</th>
                                </tr>
                                </thead>
                                <tbody>
                                <tr class="odd gradeX" *ngFor="let device of devices">
                                    <td>{{ device.id}}</td>
                                    <td>{{ device.name }}</td>
                                    <td>{{ device.friendly_name }}</td>
                                    <td> {{ device.device_model.id }}</td>
                                    <td> {{ device.use_case.id }} </td>
                                    <td>{{ device.location}}</td>
                                    <td>{{ device.region}}</td>                                    
                                </tr>
                                </tbody>
                            </table>
                    </div>
            </div>
            <!-- end panel -->
            <!-- begin panel -->
            <div class="panel panel-inverse" data-sortable-id="ui-general-3" hidden>
                    <div class="panel-heading">
                        <div class="panel-heading-btn">
                            <a href="javascript:;" class="btn btn-xs btn-icon btn-circle btn-default" data-click="panel-expand"><i class="fa fa-expand"></i></a>
                            <a href="javascript:;" class="btn btn-xs btn-icon btn-circle btn-success" data-click="panel-reload"><i class="fa fa-repeat"></i></a>
                            <a href="javascript:;" class="btn btn-xs btn-icon btn-circle btn-warning" data-click="panel-collapse"><i class="fa fa-minus"></i></a>
                        </div>
                        <h4 class="panel-title">Device Raw Data</h4>
                    </div>
                    <div class="panel-body">
                        <div class="form-group">
                            <report-results-raw [reportRequest]="reportRequestDynamicReport" caption=""  [tableViewId]="data-table-business-dyanmic-report"></report-results-raw>
                        </div>
                    </div>
            </div>
            <!-- end panel -->
        </div>
        <!-- end col-8 -->

    </div>


    <!-- begin row Sensors -->
    <div class="row hide">
        <!-- begin panel -->
        <div class="panel panel-inverse" data-sortable-id="ui-general-3">
            <div class="panel-heading">
                <div class="panel-heading-btn">
                    <a href="javascript:;" class="btn btn-xs btn-icon btn-circle btn-default" data-click="panel-expand"><i class="fa fa-expand"></i></a>
                    <a href="javascript:;" class="btn btn-xs btn-icon btn-circle btn-success" data-click="panel-reload"><i class="fa fa-repeat"></i></a>
                    <a href="javascript:;" class="btn btn-xs btn-icon btn-circle btn-warning" data-click="panel-collapse"><i class="fa fa-minus"></i></a>
                </div>
                <h4 class="panel-title">Sensors</h4>
            </div>
            <div class="panel-body">
                <button (click)="addNewDeviceModel()" type="button" class="btn btn-danger m-r-5 m-b-5">Add</button>
                <button (click)="importDeviceModel()" type="button" class="btn btn-success m-r-5 m-b-5">Import</button>
                <table id="data-table-sensors" class="table table-striped table-bordered">
                    <thead>
                    <tr>
                        <th>Devices</th>
                        <th>Sensors/Device</th>
                        <th>Device Data Frequency</th>
                        <th>Device Packet Size</th>
                        <th>Data Format</th>
                        <th>Data Interface</th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr class="odd gradeX" *ngFor="let device of sensors">
                        <td class="font-red">{{ device.id }}</td>
                        <td class="font-red"><button (click)="loadSensorDetails(device.id)" type="button" class="btn btn-link m-b-5 f-s-11" >{{ d.id }}</button></td>
                        <td>{{ device.sensors_per_device }}</td>
                        <td>{{ device.device_tag_frequency.value }} {{ device.device_tag_frequency.unit }}</td>
                        <td>{{ device.device_packet_size.value }} {{ device.device_packet_size.unit }}</td>
                        <td>{{ device.data_format }}</td>
                        <td>{{ device.data_interface }}</td>
                    </tr>
                    </tbody>
                </table>
            </div>
        </div>
        <!-- end panel -->
    </div>
    <!-- end row Use Case Devices -->

    <!-- begin row `Cancel` and `Save` buttons -->
    <div class="row ">
        <div class="col-md-6 hide">
            <button (click)="saveAsTemplate()" type="button" class="btn btn-success m-r-5 m-b-5 ">Save as Template</button>
        </div>
        <div class="col-md-6">

        </div>
        <div *ngIf="isReadOnly" >
            <ol class="breadcrumb pull-right">
                <li><button (click)="closeDeviceModel()" type="button" class="btn btn-default m-r-5 m-b-5">Close</button></li>
                <li><button (click)="editDeviceModel()" type="button" class="btn btn-danger m-r-5 m-b-5">Edit</button></li>
                <li>&nbsp;</li>
                <li>&nbsp;</li>
            </ol>
        </div>
        <div *ngIf="!isReadOnly" >
            <ol class="breadcrumb pull-right">
                <li><button (click)="cancelEditDeviceModel()" type="button" class="btn btn-default m-r-5 m-b-5 ">Cancel</button></li>
                <li><button (click)="saveDeviceModel()" type="button" class="btn btn-danger m-r-5 m-b-5">Save</button></li>
                <li>&nbsp;</li>
                <li>&nbsp;</li>
            </ol>
        </div>
    </div>
    <!-- end row `Cancel` and `Save` buttons -->

</form>


<!--

<p><textarea class="form-control" placeholder="jsonBody" rows="7" >{{ jsonBody }}</textarea></p>


<p>Form value: {{ deviceNewForm.value | json }}</p>
<p>Form status: {{ deviceNewForm.status | json }}</p>

-->